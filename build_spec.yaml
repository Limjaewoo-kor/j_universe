version: 0.1
component: build
timeoutInSeconds: 3600
shell: bash

env:
  variables:
    DATABASE_URL: ${DATABASE_URL}
    SECRET_KEY: ${SECRET_KEY}
    OPENAI_API_KEY: ${OPENAI_API_KEY}

steps:
  - type: Command
    name: Install system dependencies
    command: |
      echo "Installing system dependencies..."
      dnf install -y postgresql-devel gcc python3-devel
  - type: Command
    name: Install Python dependencies
    command: |
      pip install --upgrade pip
      pip install -r requirements.txt
  - type: Command
    name: Run FastAPI
    command: |
      echo "Starting app..."
      python main.py

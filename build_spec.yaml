version: 0.1
component: build
timeoutInSeconds: 3600
shell: bash

steps:
  - type: Command
    name: Set up Python virtual environment
    command: |
      python3 -m venv venv
      . venv/bin/activate
      pip install --upgrade pip
      pip install -r requirements.txt

  - type: Command
    name: Package application
    command: |
      mkdir -p artifacts
      chmod +x run.sh
      cp deploymentSpec.yaml run.sh requirements.txt main.py artifacts/
      cd artifacts
      zip -r app.zip .  # ✅ 루트에 정확히 위치하게 압축

outputArtifacts:
  - name: app_zip
    type: BINARY
    location: artifacts/app.zip
